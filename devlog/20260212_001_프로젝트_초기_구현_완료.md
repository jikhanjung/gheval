# 프로젝트 초기 구현 완료

- **날짜**: 2026-02-12
- **유형**: 작업 기록

## 작업 내용

GHEval 프로젝트의 전체 7단계를 한 번에 구현하여 실행 가능한 상태까지 완성하였다.

## 생성된 파일

| 파일 | 설명 |
|------|------|
| `requirements.txt` | PyQt6, PyQt6-WebEngine, peewee 의존성 |
| `GhCommons.py` | 상수, resource_path(), get_data_dir(), 위험도 계산 함수 |
| `GhModels.py` | Peewee 모델 4개 (GeoHeritageSite, SiteScreenshot, RiskEvaluation, SitePhoto) |
| `main.py` | 엔트리포인트, 로깅 설정, DB 초기화 |
| `GhEval.py` | QMainWindow — 메뉴/툴바/스플리터 레이아웃, 전체 이벤트 연결 |
| `GhComponents.py` | MapWidget, SiteListWidget, SiteInfoPanel, EvaluationPanel, PhotoGalleryWidget |
| `GhDialogs.py` | SiteEditDialog, SettingsDialog, ReportDialog (CSV/JSON 내보내기) |
| `GhMapBridge.py` | QWebChannel 브릿지 (Python↔JS 양방향 통신) |
| `templates/map_view.html` | Leaflet.js + OSM/Esri 타일 + QWebChannel 연동 |
| `templates/lib/` | Leaflet.js, CSS, 마커 이미지 (로컬 번들) |
| `migrations/000_base_schema.py` | 초기 DB 스키마 마이그레이션 |
| `migrate.py` | 마이그레이션 러너 |
| `CLAUDE.md` | 프로젝트 문서 업데이트 |
| `.gitignore` | Python/IDE/DB/로그 제외 규칙 |

## 실행 중 수정사항

1. **QActionGroup import 오류** — `PyQt6.QtWidgets`에서 `PyQt6.QtGui`로 이동 (PyQt6 6.10에서 변경)
2. **Leaflet.js CDN 로딩 실패** — QWebEngineView에서 로컬 파일 로드 시 외부 CDN 접근 불가. `templates/lib/`에 Leaflet.js, CSS, 마커 이미지를 로컬 다운로드하여 해결

## 검증 결과

- `python -m py_compile` — 전체 파일 문법 오류 없음
- Peewee 모델 테스트 — DB 생성, 사이트/평가 CRUD, 위험도 계산 정상
- `python main.py` 실행 — 앱 윈도우 표시, "Map ready" 로그 확인, JS 에러 없음
- MESA/EGL 경고는 WSL2 GPU 드라이버 관련으로 앱 동작에 영향 없음

## 데이터 저장 위치

`~/.gheval/` 디렉토리:
- `gheval.db` — SQLite 데이터베이스
- `screenshots/` — 지도 스크린샷
- `photos/` — 현장 사진
- `gheval.log` — 앱 로그
