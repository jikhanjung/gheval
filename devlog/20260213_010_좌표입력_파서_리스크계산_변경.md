# 010: 좌표 입력 파서 + 리스크 계산 2기준 변경

**날짜**: 2026-02-13

## 변경 요약

1. 리스크 계산을 4기준(합산 4-20)에서 2기준(road_proximity + vegetation_cover, 합산 2-10)으로 변경
2. New Site 다이얼로그에 다양한 좌표 포맷을 파싱하는 입력 위젯 추가

## 변경 내용

### GhCommons.py — 리스크 계산 변경

- `RISK_LEVELS`: LOW(2-4), MODERATE(5-6), HIGH(7-8), CRITICAL(9-10)
- `calculate_risk_score(road_proximity, vegetation_cover, **_kwargs)`: 2개만 합산, 나머지 인자는 무시하여 기존 호출부 호환 유지

### GhCommons.py — 좌표 파서

`parse_coordinates(text)` → `(lat, lng)` 또는 `None`

지원 포맷:

| 포맷 | 예시 |
|------|------|
| 소수점 도 | `37.5665, 126.9780` |
| 공백 구분 | `37.5665 126.9780` |
| 방향 접미 | `37.5665N 126.9780E` |
| 방향 접두 | `N37.5665 E126.9780` |
| DMS | `37°33'59.4"N 126°58'40.8"E` |
| DDM | `37°33.990'N 126°58.680'E` |
| 공백 DMS | `37 33 59.4 N, 126 58 40.8 E` |
| 음수 (남/서) | `-33.8688, 151.2093` |
| E/W↔N/S 순서 | `E126.9780 N37.5665` (자동 인식) |

내부 함수:
- `_split_coord_text(text)` — 쉼표, 세미콜론, 방향 문자, 탭, 공백 기준 분리
- `_parse_single_coord(text)` — DMS → DDM → 공백DMS → 소수점 순서로 시도

### GhDialogs.py — 좌표 입력 위젯

- `SiteEditDialog`에 "Coords Input" 행 추가 (QLineEdit + Apply 버튼)
- Enter 또는 Apply 클릭 → `parse_coordinates()` 호출 → lat/lng 스핀박스 반영
- 파싱 실패 시 빨간 테두리 표시

## 수정 파일

| 파일 | 변경 |
|------|------|
| `GhCommons.py` | `RISK_LEVELS` 범위 변경, `calculate_risk_score` 2기준, `parse_coordinates` 추가 |
| `GhDialogs.py` | `parse_coordinates` import, 좌표 입력 위젯 + `_apply_coord_input` |
